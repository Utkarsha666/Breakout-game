#ifndef BALLOBJECT_H
#define BALLOBJECT_H

#include <GL/glew.h>
#include <glm/glm.hpp>

#include "Texture.h"
#include "SpriteRenderer.h"
#include "GameObject.h"

class BallObject : public GameObject
{
 public:
  GLfloat Radius;
  GLboolean Stuck;
  BallObject();
  BallObject(glm::vec2 pos, GLfloat radius, glm::vec2 velocity, Texture2D sprite);
  glm::vec2 Move(GLfloat dt, GLuint window_width);
  void Reset(glm::vec2 position, glm::vec2 velocity);
  GLboolean CheckCollision(BallObject &one, BallObject &two)
  {
    glm::vec2 center(one.Position + one.Radius);
    glm::vec2 aabb_half_extents(two.Size.x/2, two.Size.y/2);
    glm::vec2 aabb_center(two.Position.x + aabb_half_extents.x, two.Position.y + aabb_half_extents.y);
    glm::vec2 difference = center - aabb_center;
    glm::vec2 clamped = glm::clamp(difference, -aabb_half_extents, aabb_half_extents);
    glm::vec2 closest = aabb_center + clamped;
    difference = closest - center;
    return true;
  }
};

#endif
